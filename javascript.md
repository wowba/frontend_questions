# Javascript Questions

- [var, let, const를 이용해 hoisting과 TDZ에 대해 설명해 주세요.](#var-let-const를-이용해-hoisting과-tdz에-대해-설명해-주세요)
- [자바스크립트로 CSS를 조작하다보면 FOUC(Flash of Unstyled Content)가 발생하는 경우가 있는데, 이 현상이 DOM과 어떤 관련이 있는지 설명해보실래요?](#자바스크립트로-css를-조작하다보면-foucflash-of-unstyled-content가-발생하는-경우가-있는데-이-현상이-dom과-어떤-관련이-있는지-설명해보실래요)
- [자바스크립트의 배열은 일반적인 리스트 자료구조와 어떤 차이가 있나요?](#자바스크립트의-배열은-일반적인-리스트-자료구조와-어떤-차이가-있나요)
- [이벤트 루프와 테스크 큐에 대해 설명해 주세요](#이벤트-루프와-테스크-큐에-대해-설명해-주세요)

# Answers

## var, let, const를 이용해 hoisting과 TDZ에 대해 설명해 주세요.

실행 컨텍스트가 활성화 될 때(코드를 수행할 때), 자바스크립트 엔진은 해당 컨텍스트의 코드를 실행하는 데 필요한 정보를 실행 컨텍스트에 저장합니다.

이 때 environmentRecord에는 현재 컨텍스트와 관련된 코드의 식별자 정보가 저장되는데, 컨텍스트의 처음부터 끝까지 확인하여 이 식별자들을 확인하는 과정이 hoisting 입니다.

var, let, const는 모두 hoisting을 통해 식별자 정보가 최상단으로 끌어올려지지만, 차이가 존재합니다.

var 의 경우에는 environmentRecord가 인스턴스화 될 때 undefined로 초기화 되지만, let과 const는 실제 식별자에 값이 할당되기 전에는 접근할 수 없습니다.

즉, var와는 다르게 let과 const는 undefined로 초기화 되지 않으며, 메모리에 할당되지 않기 때문에 변수가 생성된 이후 할당되기 전 일시적으로 접근할 수 없는 그 상태를 TDZ라고 부릅니다.

## 자바스크립트로 CSS를 조작하다보면 FOUC(Flash of Unstyled Content)가 발생하는 경우가 있는데, 이 현상이 DOM과 어떤 관련이 있는지 설명해보실래요?

FOUC는 브라우저의 동작방식과 연관이 있습니다.

브라우저는 HTML, CSS, JS 순서로 파일을 받아오는데, 여기서 CSS가 적용이 되지 않은 상태의 DOM이 화면에 나타나게 되면 발생하는 문제입니다.

자바스크립트로 DOM을 동적으로 조작할 때, JS 파일이 CSS 파일을 import 하고 있을 경우 발생할 수 있습니다.

이를 해결하기 위해선 자바스크립트에서 import 하는 코드를 제거해 HTML에서 해당 CSS 파일을 링크하거나,
성능에 불이익을 가져다 줄 순 있지만 HTML의 head태그에서 script태그를 작성해 자바스크립트를 우선적으로 로드하게 하여 해결할 수 있습니다.

## 자바스크립트의 배열은 일반적인 리스트 자료구조와 어떤 차이가 있나요?

[자바스크립트 배열은 배열이 아니다](https://poiemaweb.com/js-array-is-not-arrray)

일반적인 배열은 메모리 공간의 빈틈이 없이 연속적으로 나열된 자료 구조이다.

이는 O(1)로 접근할 수 있으며, 매우 효율적이지만 반대로 특정 값을 탐색하는 경우 O(n)의 시간 복잡도를 지닌다.

또한 삽입, 삭제의 경우 배열 요소를 연속적으로 유지하기 위해 요소를 이동시켜야 하므로 불리하다.

하지만 자바스크립트의 배열은 각 메모리 공간이 동일한 크기를 가지고 있지 않으며 연속적으로 이어지지 않아도 된다.

마치 희소배열 처럼 동작하는 자바스크립트의 배열은 사실 일반적인 배열의 동작을 흉내내는 특수한 객체이다.

자바스크립트 배열은 해시 테이블로 구현된 객체이므로 베열 요소에 접근하는 경우 추가적인 연산이 필요하지만, 대신 삽입 및 삭제하는 경우에는 더 빠른 성능을 기대할 수 있다.

인덱스로 접근시에 느릴수 밖에 없는 단점을 보완하기 위해 모던 자바스크립트 엔진은 배열을 일반 객체와 구별하여 보다 배열처럼 동작하도록 구현되어 있다.

## 이벤트 루프와 테스크 큐에 대해 설명해 주세요

자바스크립트는 싱글스레드이기 때문에 시간이 오래 걸리는 작업을 수행할 경우 뒤의 테스크들이 블로킹 될 수 있습니다.
따라서 브라우저에서는 이벤트 루프를 통해 자바스크립트의 동시성을 지원할 수 있습니다.

비동기 방식으로 동작하는 함수들의 실행은 자바스크립트 엔진이 담당하지만, setTimeout등의 호출 스케쥴링과 타이머 설정은
브라우저 혹은 Node.js가 담당합니다. 이를 위해 브라우저에서는 테스트 큐와 이벤트 루프를 지원합니다.

테스크 큐는 비동기 함수의 콜백 함수 혹은 이벤트 핸들러가 일시적으로 보관되는 영역입니다.

이벤트 루프는 콜 스택에 현재 실행중인 실행 컨텍스트가 있는지 확인하고, 테스크 큐에 대기중인 함수가 있는지 확인합니다.
만약 콜 스택이 비어있고, 테스크 큐에 대기중인 함수가 있다면 이벤트 루프는 FIFO로 태스크 큐의 함수를 콜 스택으로 이동시킵니다.

테스크 큐도 마이크로 태스트, 매크로 태스트 2가지로 나뉠 수 있습니다.
마이크로 테스크는 프로미스 핸들러 등 비동기 통신, 매크로 태스크는 DOM 이벤트 콜백, 타이머, 스크립트 로딩 등이 있으며
콜 스택이 비어있을 경우 이벤트 루프는 마이크로 테스크를 먼저 콜스택으로 옮깁니다.

```javascript
console.log('call stack');
setTimeout(() => console.log('macro task'), 0);
Promise.resolve().then(() => console.log('micro task'));

// 출력 순서
// call stack
// micro task
// macro task
```
